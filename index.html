<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>meegpipe by meegpipe</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>meegpipe</h1>
        <p>Scalable and reproducible pipelines for M/EEG</p>

        <p class="view"><a href="https://github.com/meegpipe/meegpipe">View the Project on GitHub <small>meegpipe/meegpipe</small></a></p>


        <ul>
          <li><a href="https://github.com/meegpipe/meegpipe/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/meegpipe/meegpipe/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/meegpipe/meegpipe">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="meegpipe" class="anchor" href="#meegpipe"><span class="octicon octicon-link"></span></a>meegpipe</h1>

<p><em>meegpipe</em> is a collection of MATLAB tools for building advanced processing
pipelines for high density physiological recordings. It is especially 
suited for the processing of high-density <a href="http://en.wikipedia.org/wiki/Electroencephalography">EEG</a> and <a href="http://en.wikipedia.org/wiki/Magnetoencephalography">MEG</a>, 
but can also handle other modalities such as <a href="http://en.wikipedia.org/wiki/Electrocardiography">ECG</a>, temperature, 
<a href="http://en.wikipedia.org/wiki/Actigraphy">actigraphy</a>, light exposure, etc. </p>

<p>Be aware however that, so far, <em>meegpipe</em> has been tested only with hdEEG data, 
and even in that case the testing has been very superficial. So expect to find
many bugs if you are brave enough to use the current version. On the bright 
side, you should expect the API to be relatively stable at this point. If 
you find any bug or have any feedback to share, please <a href="http://germangh.com">contact me</a>.</p>

<p>In the documentation below I often assume a Linux-like system (e.g. use of 
frontslashes, <code>~</code> to denote home directory, etc). However, <em>meegpipe</em> should 
also run under Windows. If you are using Windows, some of the commands that
appear below might need minor modifications like replacing <code>~</code> by your home
directory name.</p>

<h2>
<a name="pre-requisites" class="anchor" href="#pre-requisites"><span class="octicon octicon-link"></span></a>Pre-requisites</h2>

<p>If you are working at somerengrid (our lab's private computing grid), then all the
pre-requisites are already there and you can go directly to the installation instructions.
Otherwise, you will have to install the requirements below. </p>

<h3>
<a name="fieldtrip-and-eeglab" class="anchor" href="#fieldtrip-and-eeglab"><span class="octicon octicon-link"></span></a>Fieldtrip and EEGLAB</h3>

<p><a href="http://fieldtrip.fcdonders.nl/">Fieldtrip</a> and <a href="http://sccn.ucsd.edu/eeglab/">EEGLAB</a> are required mostly for input/output 
of data from/to various data formats, and for plotting. Please <strong>do not</strong> add
Fieldtrip and EEGLAB to your MATLAB search path. Instead simply edit 
<a href="http://github.com/germangh/meegpipe/blob/master/%2Bmeegpipe/meegpipe.ini">+meegpipe/meegpipe.ini</a> to include the paths to the root 
directories of Fieldtrip and EEGLAB on your system.</p>

<h3>
<a name="python" class="anchor" href="#python"><span class="octicon octicon-link"></span></a>Python</h3>

<p>A. Kenneth Reitz has written an excellent guide on 
<a href="http://docs.python-guide.org/en/latest/starting/installation/">how to install Python</a>. <em>meegpipe</em> requires a Python 2.x
interpreter, where x is ideally at least 7. Please ensure that 
<strong>easy_install</strong> and <strong>pip</strong> are also installed. Refer to the 
<a href="http://docs.python-guide.org/en/latest/starting/installation/">python installation guide</a> for more details. </p>

<p>If your OS is Linux-based (that includes Mac OS X) chances are that Python is already 
installed on your system. In that case, open a terminal and ensure that you have the 
required version of Python:</p>

<pre><code>python --version
</code></pre>

<p>Even if your OS ships with Python, you may have to install 
<strong>easy_install</strong> and <strong>pip</strong>. This can be done by 
<a href="https://pypi.python.org/pypi/setuptools#installation-instructions">installing easy_install</a> and then running in a terminal (or 
Windows command window):</p>

<pre><code>easy_install pip
</code></pre>

<h3>
<a name="remark" class="anchor" href="#remark"><span class="octicon octicon-link"></span></a>Remark</h3>

<p>The <a href="http://kaba.hilvi.org/remark/remark.htm">Remark</a> python library is required for generating HTML reports.
To install Rermark in Mac OS X and Linux run from the command line:</p>

<pre><code>sudo pip install remark
</code></pre>

<p>In Windows, open a terminal and run:</p>

<pre><code>easy_install pillow
pip install remark
</code></pre>

<h3>
<a name="inkscape" class="anchor" href="#inkscape"><span class="octicon octicon-link"></span></a>Inkscape</h3>

<p><a href="http://en.dev.inkscape.org/download/">Inkscape</a> is required for generating the thumbnail images that
are embedded in the data processing reports. </p>

<h3>
<a name="optional-dependencies" class="anchor" href="#optional-dependencies"><span class="octicon octicon-link"></span></a>Optional dependencies</h3>

<h4>
<a name="google-chrome-strongly-recommended" class="anchor" href="#google-chrome-strongly-recommended"><span class="octicon octicon-link"></span></a>Google Chrome (strongly recommended)</h4>

<p><em>meegpipe</em> generates HTML reports with lots of <a href="http://en.wikipedia.org/wiki/Scalable_Vector_Graphics">.svg</a> graphics
embedded. <a href="https://www.google.com/intl/en/chrome/browser/">Google Chrome</a> is far superior to other browsers when handling
<code>.svg</code> files and thus it is strongly recommended that you install Google
Chrome. </p>

<h4>
<a name="sunoracle-grid-engine" class="anchor" href="#sunoracle-grid-engine"><span class="octicon octicon-link"></span></a>Sun/Oracle grid engine</h4>

<p>If <a href="http://www.oracle.com/us/products/tools/oracle-grid-engine-075549.html">Oracle Grid Engine</a> (OGE) is installed on your system,
then <em>meegpipe</em> should be able to use it to push your processing jobs to the
grid.  A good overview on the administration of OGE can be found on 
<a href="http://beowulf.rutgers.edu/info-user/pdf/ge_presentation.pdf">this presentation</a> by Daniel Templeton. </p>

<h4>
<a name="condor-high-throughput-computing" class="anchor" href="#condor-high-throughput-computing"><span class="octicon octicon-link"></span></a>Condor high-throughput computing</h4>

<p>If <a href="http://research.cs.wisc.edu/htcondor/">Condor</a> is installed on your system then <em>meegpipe</em> will be 
able to use to parallelize the workload produced by <em>meegpipe</em>. Condor can 
be used to submit jobs to specialized clusters, to idle computers, to 
the grid, or even to the cloud. If you are using <em>meegpipe</em> on a powerful 
multi-core workstation you can also use Condor to exploit these local 
parallel resources.</p>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Clone the repository, either in <a href="https://github.com/meegpipe/meegpipe/archive/master.zip">.zip format</a>
or using the command line, as follows:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span><span class="nb">cd</span> ~
<span class="nv">$ </span>git clone git://github.com/meegpipe/meegpipe
</pre></div>

<p>The commands above will download <em>meegpipe</em>'s source code into directory
 <code>~/meegpipe</code>.  Once this is done you should edit the configuration of 
<em>meegpipe</em> by defining the locations of the third-party MATLAB dependencies 
(Fieldtrip and EEGLAB) on your system. Do this by following the
 instructions in <a href="http://github.com/meegpipe/meegpipe/blob/master/%2Bmeegpipe/meegpipe.ini">+meegpipe/meegpipe.ini</a>. </p>

<h2>
<a name="basic-usage" class="anchor" href="#basic-usage"><span class="octicon octicon-link"></span></a>Basic usage</h2>

<p>Before anything else you will have to add <em>meegpipe</em> and its dependencies
to your MATLAB search path:</p>

<div class="highlight highlight-matlab"><pre><span class="n">restoredefaultpath</span><span class="p">;</span>
<span class="n">addpath</span><span class="p">(</span><span class="n">genpath</span><span class="p">(</span><span class="s">'~/meegpipe'</span><span class="p">));</span>
<span class="n">meegpipe</span><span class="p">.</span><span class="n">initialize</span><span class="p">;</span>
</pre></div>

<p>The commands above will ensure that your MATLAB search path contains <strong>only</strong> 
the MATLAB sources that are needed for <em>meegpipe</em> to run. 
Namely, <em>meegpipe</em> itself, and a subset of Fieldtrip and EEGLAB. The 
<code>restoredefaultpath</code> command is important to ensure that other toolboxes do 
not interfere with <em>meegpipe</em>. On the other hand, <em>meegpipe</em> components are 
all encapsulated in <a href="http://www.mathworks.nl/help/matlab/matlab_oop/scoping-classes-with-packages.html">MATLAB packages</a>, which should prevent 
<em>meegpipe</em> interfering with other toolboxes. Thus it should be relatively
 safe for you to add the three lines above to your MATLAB <a href="http://www.mathworks.nl/help/matlab/ref/startup.html">startup</a>
 function so that you don't need to type them every time you start MATLAB.</p>

<h3>
<a name="data-import" class="anchor" href="#data-import"><span class="octicon octicon-link"></span></a>Data import</h3>

<div class="highlight highlight-matlab"><pre><span class="n">import</span> <span class="n">physioset</span><span class="p">.</span><span class="n">import</span><span class="o">.*</span><span class="p">;</span>
<span class="c">% Import from an .mff file</span>
<span class="n">data</span> <span class="p">=</span> <span class="n">import</span><span class="p">(</span><span class="n">mff</span><span class="p">,</span> <span class="s">'myfile.mff'</span><span class="p">);</span>
<span class="c">% Import from an EDF+ file</span>
<span class="n">data</span> <span class="p">=</span> <span class="n">import</span><span class="p">(</span><span class="n">edfplus</span><span class="p">,</span> <span class="s">'myfile.edf'</span><span class="p">);</span>
<span class="c">% Import MATLAB built-in numerics</span>
<span class="n">data</span> <span class="p">=</span> <span class="n">import</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="nb">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10000</span><span class="p">));</span>
</pre></div>

<p>All data importer classes implement an <code>import()</code> method, which always 
produces a <a href="https://github.com/meegpipe/meegpipe/blob/master/%2Bphysioset/%40physioset/README.md">physioset</a> object. For more information and a list 
of available data importers see the <a href="./+physioset/+import/README.md">documentation</a>.</p>

<h3>
<a name="data-processing-nodes" class="anchor" href="#data-processing-nodes"><span class="octicon octicon-link"></span></a>Data processing nodes</h3>

<div class="highlight highlight-matlab"><pre><span class="n">import</span> <span class="n">meegpipe</span><span class="o">.*</span><span class="p">;</span>
<span class="n">import</span> <span class="n">physioset</span><span class="p">.</span><span class="n">import</span><span class="p">.</span><span class="n">matrix</span><span class="p">;</span>

<span class="n">data</span> <span class="p">=</span> <span class="n">import</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="nb">randn</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10000</span><span class="p">));</span>

<span class="c">% Detrend using a 10th order polynomial</span>
<span class="n">myNode1</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">detrend</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="s">'PolyOrder'</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="n">run</span><span class="p">(</span><span class="n">myNode1</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>

<span class="c">% Filter data using a tfilter (temporal filter) node</span>
<span class="c">% First build a band-pass filter object</span>
<span class="n">myFilter</span> <span class="p">=</span> <span class="n">filter</span><span class="p">.</span><span class="n">bpfilt</span><span class="p">(</span><span class="s">'Fp'</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.1</span> <span class="mf">0.3</span><span class="p">]);</span>
<span class="c">% And then use it to construct the node</span>
<span class="n">myNode2</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">tfilter</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="s">'Filter'</span><span class="p">,</span> <span class="n">myFilter</span><span class="p">);</span>
<span class="n">run</span><span class="p">(</span><span class="n">myNode2</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
</pre></div>

<p>For more information and a list of available processing nodes, see the
<a href="./+meegpipe/+node/README.md">documenation</a>.</p>

<h3>
<a name="processing-reports" class="anchor" href="#processing-reports"><span class="octicon octicon-link"></span></a>Processing reports</h3>

<p>One of the great features of <em>meegpipe</em> is that it generates comprehensive 
HTML reports for every data processing task. In the example above, you 
should have got a warning saying something like:</p>

<blockquote>
<p><strong>Warning</strong>: A new session was created in folder 'session_1' <br>
In session.session&gt;session.instance at 82 <br>
 In pset.generate_data at 35 <br>
 In matrix.import at 62 <br></p>
</blockquote>

<p>This means that <em>meegpipe</em> just created a directory <code>session_1</code>, which will be 
used to store, among other things, the data processing reports. Namely, you can 
find a node's HTML report under:</p>

<pre><code>session_1/[DATA].meegpipe/[NODE]_[USR]_[SYS]/remark/index.htm
</code></pre>

<p>where</p>

<ul>
<li><p><strong>DATA</strong> is a string identifying the processed <a href="https://github.com/meegpipe/meegpipe/blob/master/%2Bphysioset/%40physioset/README.md">physioset</a>. Use
method <code>get_name()</code> to find out the name of a <a href="https://github.com/meegpipe/meegpipe/blob/master/%2Bphysioset/%40physioset/README.md">physioset</a> object.</p></li>
<li><p><strong>NODE</strong> is a string identifying the <em>processing node</em>. It is a combination of 
the node name (which can be obtained using method <code>get_name()</code>) and a hash code that 
summarizes the node configuration. </p></li>
<li><p><strong>USR</strong> is just the name of the user that ran command <code>run()</code>.</p></li>
<li><p><strong>SYS</strong> is a string identifying the operating system and MATLAB version (e.g. <em>PCWIN64-R2011b</em>). </p></li>
</ul><p><strong>NOTE for Windows 8 users</strong>: For some unknown reason neither Firefox nor
Google Chrome are able to display local .svg files, when running under 
Windows 8. Whenever trying to do so, both browsers attempt to download the 
file and thus the file is not displayed. Read the 
<a href="./issues.md">document on known issues and limitations</a> for ways to overcome
this problem.</p>

<h3>
<a name="pipelines" class="anchor" href="#pipelines"><span class="octicon octicon-link"></span></a>Pipelines</h3>

<p>A <em>pipeline</em> is just a concatenation of nodes. With the exception of
<a href="https://github.com/meegpipe/meegpipe/blob/master/%2Bmeegpipe/%2Bnode/%2Bphysioset_import/%40physioset_import/physioset_import.m">physioset_import</a> nodes, all other node classes always
take a <a href="https://github.com/meegpipe/meegpipe/blob/master/%2Bphysioset/%40physioset/README.md">physioset</a> as input.</p>

<div class="highlight highlight-matlab"><pre><span class="n">import</span> <span class="n">meegpipe</span><span class="o">.*</span><span class="p">;</span>
<span class="n">import</span> <span class="n">physioset</span><span class="p">.</span><span class="n">import</span><span class="o">.*</span><span class="p">;</span>
<span class="n">myNode1</span>  <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">physioset_import</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="s">'Importer'</span><span class="p">,</span> <span class="n">mff</span><span class="p">);</span>
<span class="n">myFilter</span> <span class="p">=</span> <span class="n">filter</span><span class="p">.</span><span class="n">bpfilt</span><span class="p">(</span><span class="s">'Fp'</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.1</span> <span class="mf">0.3</span><span class="p">]);</span>
<span class="n">myNode2</span>  <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">tfilter</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="s">'Filter'</span><span class="p">,</span> <span class="n">myFilter</span><span class="p">);</span>
<span class="n">myPipe</span>   <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">pipeline</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="s">'NodeList'</span><span class="p">,</span> <span class="p">{</span><span class="n">myNode1</span><span class="p">,</span> <span class="n">myNode2</span><span class="p">});</span>

<span class="c">% Will read from .mff file, and band-pass filter the data it contains</span>
<span class="n">data</span> <span class="p">=</span> <span class="n">run</span><span class="p">(</span><span class="n">myPipe</span><span class="p">,</span> <span class="s">'myfile.mff'</span><span class="p">);</span>

</pre></div>

<h3>
<a name="data-export" class="anchor" href="#data-export"><span class="octicon octicon-link"></span></a>Data export</h3>

<div class="highlight highlight-matlab"><pre><span class="c">% Create a random EEG physioset</span>
<span class="n">mySensors</span> <span class="p">=</span> <span class="n">sensors</span><span class="p">.</span><span class="n">eeg</span><span class="p">.</span><span class="n">from_template</span><span class="p">(</span><span class="s">'egi256'</span><span class="p">);</span>
<span class="n">mySensors</span> <span class="p">=</span> <span class="n">subset</span><span class="p">(</span><span class="n">mySensors</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span><span class="mi">10</span><span class="p">:</span><span class="mi">256</span><span class="p">);</span>
<span class="n">myImporter</span> <span class="p">=</span> <span class="n">physioset</span><span class="p">.</span><span class="n">import</span><span class="p">.</span><span class="n">matrix</span><span class="p">(</span><span class="s">'Sensors'</span><span class="p">,</span> <span class="n">mySensors</span><span class="p">);</span>
<span class="n">data</span> <span class="p">=</span> <span class="n">import</span><span class="p">(</span><span class="n">myImporter</span><span class="p">,</span> <span class="nb">randn</span><span class="p">(</span><span class="mi">26</span><span class="p">,</span> <span class="mi">2000</span><span class="p">));</span>
<span class="c">% Export to EEGLAB</span>
<span class="n">myEEGLABStr</span> <span class="p">=</span> <span class="n">eeglab</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
<span class="c">% Export to Fieldtrip</span>
<span class="n">myFTripStr</span> <span class="p">=</span> <span class="n">fieldtrip</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
</pre></div>

<h2>
<a name="more-information" class="anchor" href="#more-information"><span class="octicon octicon-link"></span></a>More information</h2>

<p>See the practical <a href="http://github.com/meegpipe/meegpipe/tree/master/tutorials">tutorials</a>
for some typical use cases of <em>meegpipe</em>. A high-level description of the API components 
can be found in the <a href="https://github.com/meegpipe/meegpipe/blob/master/%2Bmeegpipe/README.md">documentation</a>, which is still work 
in progress. </p>

<h2>
<a name="attribution" class="anchor" href="#attribution"><span class="octicon octicon-link"></span></a>Attribution</h2>

<p>For convenience, <em>meegpipe</em> ships together with code from third-parties. 
You can find a comprehensive list <a href="https://github.com/meegpipe/meegpipe/blob/master/attribution.md">here</a>. </p>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>Any code that is not part of any of the bundled third-party dependencies
(see <a href="https://github.com/meegpipe/meegpipe/blob/master/attribution.md">the list</a>), is released under the 
<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike licence</a>. </p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/meegpipe">meegpipe</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-44767640-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>