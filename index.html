<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>meegpipe by meegpipe</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>meegpipe</h1>
        <p>Scalable and reproducible M/EEG pipelines</p>

        <p class="view"><a href="https://github.com/meegpipe/meegpipe">View the Project on GitHub <small>meegpipe/meegpipe</small></a></p>


        <ul>
          <li><a href="https://github.com/meegpipe/meegpipe/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/meegpipe/meegpipe/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/meegpipe/meegpipe">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="meegpipe" class="anchor" href="#meegpipe"><span class="octicon octicon-link"></span></a>meegpipe</h1>

<p><em>meegpipe</em> is a collection of MATLAB tools for building advanced processing
pipelines for high density physiological recordings. It is especially
suited for the processing of high-density <a href="http://en.wikipedia.org/wiki/Electroencephalography">EEG</a> and <a href="http://en.wikipedia.org/wiki/Magnetoencephalography">MEG</a>,
but can also handle other modalities such as <a href="http://en.wikipedia.org/wiki/Electrocardiography">ECG</a>, temperature,
<a href="http://en.wikipedia.org/wiki/Actigraphy">actigraphy</a>, light exposure, etc.</p>

<h2>
<a name="pre-requisites-third-party-dependencies" class="anchor" href="#pre-requisites-third-party-dependencies"><span class="octicon octicon-link"></span></a>Pre-requisites (third-party dependencies)</h2>

<p>If you are working at somerengrid (our lab's private computing grid), then
all the pre-requisites are already there and you can go directly to the
installation instructions.</p>

<h3>
<a name="eeglab" class="anchor" href="#eeglab"><span class="octicon octicon-link"></span></a>EEGLAB</h3>

<p><a href="http://sccn.ucsd.edu/eeglab/">EEGLAB</a> is required mostly for input/output of data from/to
 various data formats, and for plotting. Please ensure that EEGLAB is in
your MATLAB search path.</p>

<h3>
<a name="highly-recommended-dependencies" class="anchor" href="#highly-recommended-dependencies"><span class="octicon octicon-link"></span></a>Highly recommended dependencies</h3>

<p>The engine responsible for generating data processing reports in HTML
relies on several Python packages and on <a href="http://www.inkscape.org/en/">Inkscape</a>. <em>meegpipe</em> will
 be fully functional without these dependencies, but the processing reports
will be generated in a plain text format (using <a href="http://kaba.hilvi.org/remark/remark.htm">Remark</a> syntax).
Inspecting plain text reports with embedded images is <em>very inconvenient</em>
so please consider installing these <a href="https://github.com/meegpipe/meegpipe/blob/master/recommended.md">highly recommended dependencies</a>.</p>

<h3>
<a name="optional" class="anchor" href="#optional"><span class="octicon octicon-link"></span></a>Optional</h3>

<p>You are encouraged to install a few <a href="https://github.com/meegpipe/meegpipe/blob/master/optional.md">additional components</a> that
can enhance <em>meegpipe</em>'s functionality in terms of
<a href="http://en.wikipedia.org/wiki/High-throughput_computing">high-throughput computing</a>.</p>

<h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Copy and paste the following code in the MATLAB command window:</p>

<div class="highlight highlight-matlab"><pre><span class="c">% installDir is your installation directory</span>
<span class="n">installDir</span> <span class="p">=</span> <span class="p">[</span><span class="n">pwd</span> <span class="n">filesep</span> <span class="s">'meegpipe'</span><span class="p">];</span>
<span class="n">url</span> <span class="p">=</span> <span class="s">'https://github.com/meegpipe/meegpipe/zipball/master'</span><span class="p">;</span>
<span class="n">unzip</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">installDir</span><span class="p">);</span>
<span class="n">addpath</span><span class="p">(</span><span class="n">genpath</span><span class="p">(</span><span class="s">'meegpipe'</span><span class="p">));</span>
<span class="n">meegpipe</span><span class="p">.</span><span class="n">initialize</span><span class="p">;</span>

<span class="c">% Initialize meegpipe every time that MATLAB starts</span>
<span class="n">addpath</span><span class="p">(</span><span class="n">userpath</span><span class="p">);</span>
<span class="n">add2startup</span> <span class="p">=</span> <span class="p">[</span><span class="c">...</span>
    <span class="s">'% Added by meegpipe (http://germangh.com/meegpipe\n'</span> <span class="c">...</span>
    <span class="s">'\naddpath(genpath(''%s''));'</span> <span class="c">...</span>
    <span class="s">'\nmeegpipe.initialize;\n'</span><span class="p">];</span>
<span class="n">fid</span> <span class="p">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">which</span><span class="p">(</span><span class="s">'startup'</span><span class="p">),</span> <span class="s">'a'</span><span class="p">);</span>
<span class="n">fprintf</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">add2startup</span><span class="p">,</span> <span class="n">installDir</span><span class="p">);</span>
<span class="n">fclose</span><span class="p">(</span><span class="n">fid</span><span class="p">);</span>
</pre></div>

<p>Notice that the code above will install <em>meegpipe</em> in directory <code>meegpipe</code>
under your current working directory. Notice also that EEGLAB needs to be
part of your MATLAB search path for the <code>meegpipe.initialize</code> command to
 succeed. This means that you either add EEGLAB permanently to your MATLAB
search path, or you add the following command to your <code>startup.m</code> file, 
before <code>meegpipe.initialize</code> command:</p>

<div class="highlight highlight-matlab"><pre><span class="n">addpath</span><span class="p">(</span><span class="n">genpath</span><span class="p">(</span><span class="s">'/path/to/your/eeglab/installation'</span><span class="p">));</span>
</pre></div>

<h2>
<a name="basic-usage" class="anchor" href="#basic-usage"><span class="octicon octicon-link"></span></a>Basic usage</h2>

<h3>
<a name="data-processing-nodes" class="anchor" href="#data-processing-nodes"><span class="octicon octicon-link"></span></a>Data processing nodes</h3>

<p><em>meegpipe</em> allows you to build processing pipelines by definining what you
want to do with your data in terms of <em>processing nodes</em>. There are
processing nodes for a variaty of tasks: importing from disk, filtering,
bad channel rejection, removing artifacts, feature extraction, etc. You can
also easily define your own nodes that will integrate seamlessly with
the <em>meegpipe</em> framework.</p>

<p>For convenience, we bring package <em>meegpipe</em> to the current name space:</p>

<pre><code>import meegpipe.*;
</code></pre>

<p>Generate a <a href="https://github.com/meegpipe/meegpipe/blob/master/%2Bphysioset/%40physioset/README.md">physioset</a> object from a MATLAB matrix using a
<a href="https://github.com/meegpipe/meegpipe/blob/master/%2Bmeegpipe/%2Bnode/%2Bphysioset_import/README.md">physioset_import</a> node:</p>

<div class="highlight highlight-matlab"><pre><span class="n">myImporter</span> <span class="p">=</span> <span class="n">physioset</span><span class="p">.</span><span class="n">import</span><span class="p">.</span><span class="n">matrix</span><span class="p">(</span><span class="s">'SamplingRate'</span><span class="p">,</span> <span class="mi">250</span><span class="p">);</span>
<span class="n">n0</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">physioset_import</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="s">'Importer'</span><span class="p">,</span> <span class="n">myImporter</span><span class="p">);</span>
<span class="c">% Run it! import the data!</span>
<span class="n">data</span> <span class="p">=</span> <span class="n">run</span><span class="p">(</span><span class="n">n0</span><span class="p">,</span> <span class="nb">randn</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10000</span><span class="p">));</span>
</pre></div>

<p>A node that detrends the imported data using a 10th order polynomial:</p>

<div class="highlight highlight-matlab"><pre><span class="n">n1</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">filter</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="s">'Filter'</span><span class="p">,</span> <span class="n">filter</span><span class="p">.</span><span class="n">polyfit</span><span class="p">(</span><span class="s">'Order'</span><span class="p">,</span> <span class="mi">10</span><span class="p">));</span>
<span class="n">run</span><span class="p">(</span><span class="n">n1</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
</pre></div>

<p>Reject bad channels:</p>

<div class="highlight highlight-matlab"><pre><span class="n">n2</span>  <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">bad_channels</span><span class="p">.</span><span class="n">new</span><span class="p">;</span>
<span class="n">run</span><span class="p">(</span><span class="n">n2</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
</pre></div>

<p>Apply a band pass filter between 0.1 and 70 Hz:</p>

<div class="highlight highlight-matlab"><pre><span class="n">myFilter</span> <span class="p">=</span> <span class="p">@(</span><span class="n">sr</span><span class="p">)</span> <span class="n">filter</span><span class="p">.</span><span class="n">bpfilt</span><span class="p">(</span><span class="s">'Fp'</span><span class="p">,</span> <span class="p">[</span><span class="mf">0.1</span> <span class="mi">70</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="n">sr</span><span class="o">/</span><span class="mi">2</span><span class="p">));</span>
<span class="n">n3</span>   <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">filter</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="s">'Filter'</span><span class="p">,</span> <span class="n">myFilter</span><span class="p">);</span>
<span class="n">run</span><span class="p">(</span><span class="n">n3</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
</pre></div>

<p>Remove powerline noise using <a href="http://en.wikipedia.org/wiki/Blind_signal_separation">Blind Source Separation (BSS)</a>:</p>

<div class="highlight highlight-matlab"><pre><span class="n">n4</span>   <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">bss</span><span class="p">.</span><span class="n">pwl</span><span class="p">;</span>
<span class="n">run</span><span class="p">(</span><span class="n">n4</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
</pre></div>

<p>Reject ocular artifacts using BSS:</p>

<div class="highlight highlight-matlab"><pre><span class="n">n5</span>   <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">bss</span><span class="p">.</span><span class="n">eog</span><span class="p">;</span>
<span class="n">run</span><span class="p">(</span><span class="n">n5</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
</pre></div>

<p>Export to EEGLAB format:</p>

<div class="highlight highlight-matlab"><pre><span class="n">myExporter</span> <span class="p">=</span> <span class="n">physioset</span><span class="p">.</span><span class="n">export</span><span class="p">.</span><span class="n">eeglab</span><span class="p">;</span>
<span class="n">n6</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">physioset_export</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="s">'Exporter'</span><span class="p">,</span> <span class="n">myExporter</span><span class="p">);</span>
<span class="n">run</span><span class="p">(</span><span class="n">n6</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
</pre></div>

<p>For more information and a list of available processing nodes, see the
<a href="http://github.com/meegpipe/meegpipe/blob/master/+meegpipe/+node/README.md">documentation</a>.</p>

<h3>
<a name="processing-reports" class="anchor" href="#processing-reports"><span class="octicon octicon-link"></span></a>Processing reports</h3>

<p>Every processing node generates a comprehensive HTML report for every data file
that is processed. In the examples above, you should have got an initial warning
saying something like:</p>

<blockquote>
<p><strong>Warning</strong>: A new session was created in folder 'session_1' <br>
In session.session&gt;session.instance at 82 <br>
 In pset.generate_data at 35 <br>
 In matrix.import at 62 <br></p>
</blockquote>

<p>This means that <em>meegpipe</em> just created a directory <code>session_1</code>, which will be
used to store, among other things, the data processing reports. Namely, you can
find a node's HTML report under:</p>

<pre><code>session_1/[DATA].meegpipe/[NODE]_[USR]_[SYS]/index.htm
</code></pre>

<p>where</p>

<p><strong>DATA</strong> is a string identifying the processed <a href="https://github.com/meegpipe/meegpipe/blob/master/%2Bphysioset/%40physioset/README.md">physioset</a>. Use
 method <code>get_name()</code> to find out the name of a <a href="https://github.com/meegpipe/meegpipe/blob/master/%2Bphysioset/%40physioset/README.md">physioset</a> object.</p>

<p><strong>NODE</strong> is a string identifying the <em>processing node</em>. It is a combination of
 the node name (which can be obtained using method <code>get_name()</code>) and a hash code that
 summarizes the node configuration.</p>

<p><strong>USR</strong> is just the name of the user that ran command <code>run()</code>.</p>

<p><strong>SYS</strong> is a string identifying the operating system and MATLAB version (e.g. <em>PCWIN64-R2011b</em>).</p>

<p>Neither Firefox nor Google Chrome are able to display local .svg files, when
running under Windows 8. Whenever trying to do so, both browsers attempt to
download the file and thus the file is not displayed. Read the
<a href="https://github.com/meegpipe/meegpipe/blob/master/issues.md">document on known issues and limitations</a> for ways to overcome
this problem.</p>

<p><strong>NOTE:</strong> The HTML reports will be generated only if you have installed all
the <a href="https://github.com/meegpipe/meegpipe/blob/master/recommended.md">recommended dependencies</a> on your system.</p>

<h3>
<a name="pipelines" class="anchor" href="#pipelines"><span class="octicon octicon-link"></span></a>Pipelines</h3>

<p>A <code>pipeline</code> is just a concatenation of nodes. With the exception of
<a href="https://github.com/meegpipe/meegpipe/blob/master/%2Bmeegpipe/%2Bnode/%2Bphysioset_import/%40physioset_import/physioset_import.m">physioset_import</a> nodes, all other node classes always
take a <a href="https://github.com/meegpipe/meegpipe/blob/master/%2Bphysioset/%40physioset/README.md">physioset</a> as input. And with the exception of
<a href="https://github.com/meegpipe/meegpipe/blob/master/%2Bmeegpipe/%2Bnode/%2Bphysioset_export/%40physioset_export/physioset_export.m">physioset_export</a> nodes, all other node classes produce a
<code>physioset</code> object as output.</p>

<p>The five processing steps that we performed above when illustrating how nodes
work could have been grouped into a pipeline:</p>

<div class="highlight highlight-matlab"><pre><span class="n">import</span> <span class="n">meegpipe</span><span class="o">.*</span><span class="p">;</span>
<span class="n">import</span> <span class="n">physioset</span><span class="p">.</span><span class="n">import</span><span class="o">.*</span><span class="p">;</span>

<span class="n">myPipe</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">pipeline</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="c">...</span>
    <span class="s">'NodeList'</span><span class="p">,</span> <span class="p">{</span><span class="n">n0</span><span class="p">,</span> <span class="n">n1</span><span class="p">,</span> <span class="n">n2</span><span class="p">,</span> <span class="n">n3</span><span class="p">,</span> <span class="n">n4</span><span class="p">,</span> <span class="n">n5</span><span class="p">,</span> <span class="n">n6</span><span class="p">});</span>

<span class="c">% Will produce an output file in EEGLAB format</span>
<span class="n">run</span><span class="p">(</span><span class="n">myPipe</span><span class="p">,</span> <span class="nb">randn</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10000</span><span class="p">));</span>

</pre></div>

<h2>
<a name="more-information" class="anchor" href="#more-information"><span class="octicon octicon-link"></span></a>More information</h2>

<p>See the practical <a href="http://github.com/meegpipe/meegpipe/tree/master/tutorials/README.md">tutorials</a>
for some typical use cases of <em>meegpipe</em>. A high-level description of the API components
can be found in the <a href="https://github.com/meegpipe/meegpipe/blob/master/%2Bmeegpipe/README.md">documentation</a>. The documentation is still
work in progress.</p>

<h2>
<a name="license" class="anchor" href="#license"><span class="octicon octicon-link"></span></a>License</h2>

<p>For convenience, <em>meegpipe</em> ships together with code from third-parties.
You can find a comprehensive list <a href="https://github.com/meegpipe/meegpipe/blob/master/attribution.md">here</a>.</p>

<p>Any code that is not part of any of the bundled third-party dependencies
(see <a href="https://github.com/meegpipe/meegpipe/blob/master/attribution.md">the list</a>), is released under the
<a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons Attribution-NonCommercial-ShareAlike licence</a>.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/meegpipe">meegpipe</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-44767640-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>